var v=(d,c,a)=>new Promise((_,o)=>{var r=t=>{try{i(a.next(t))}catch(s){o(s)}},e=t=>{try{i(a.throw(t))}catch(s){o(s)}},i=t=>t.done?_(t.value):Promise.resolve(t.value).then(r,e);i((a=a.apply(d,c)).next())});import{d as P,j as m,aN as h,ba as b,a1 as j,aG as I,r as u,o as R,D as T,w as p,b as l,u as k,e as B,Q as E,n as U,t as z,U as x,bc as A,ae as D,R as K,a9 as M,h as V}from"./index-3efa3bcd.js";import{i as F}from"./icon-f6cbc454.js";import{u as J,E as O,P as G}from"./chartEditStore-1e6a587f.js";import{u as H}from"./project.api-31a95c84.js";import{u as L}from"./useSync.hook-e4169a36.js";import"./plugin-52ae8d1b.js";import"./chartLayoutStore-db3d2e1b.js";import"./index-a77faccb.js";import"./SettingItem-aacbe70b.js";/* empty css                                                                      */import"./SettingItemBox-94318b9b.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-bd202dab.js";import"./index.esm.min-21e18cb2.js";import"./fileTypeEnum-21359a08.js";const Q={class:"title"},$=P({__name:"index",setup(d){const c=J(),{dataSyncUpdate:a}=L(),{FishIcon:_}=F.ionicons5,o=m(!1),r=m(null),e=m(h());b(()=>{e.value=c.getProjectInfo.projectName||""});const i=j(()=>{e.value=e.value.replace(/\s/g,"");const n=e.value.length?e.value:"新项目";return I(`工作空间-${n}`),c.setEditCanvasConfig(O.PROJECT_NAME,n),n}),t=()=>{o.value=!0,D(()=>{r.value&&r.value.focus()})},s=()=>v(this,null,function*(){o.value=!1,c.setProjectInfo(G.PROJECT_NAME,e.value||"");const n=yield H({id:h(),projectName:e.value});n&&n.code===K.SUCCESS?a():M()});return(n,f)=>{const y=u("n-icon"),C=u("n-button"),w=u("n-text"),S=u("n-input"),g=u("n-space");return R(),T(g,null,{default:p(()=>[l(y,{size:"20",depth:3},{default:p(()=>[l(k(_))]),_:1}),l(w,{onClick:t},{default:p(()=>[B(" 工作空间 - "),E(l(C,{secondary:"",size:"tiny"},{default:p(()=>[U("span",Q,z(i.value),1)]),_:1},512),[[x,!o.value]])]),_:1}),E(l(S,{ref_key:"inputInstRef",ref:r,size:"small",type:"text",maxlength:"16","show-count":"",placeholder:"请输入项目名称",value:e.value,"onUpdate:value":f[0]||(f[0]=N=>e.value=N),valueModifiers:{trim:!0},onKeyup:A(s,["enter"]),onBlur:s},null,8,["value","onKeyup"]),[[x,o.value]])]),_:1})}}});const le=V($,[["__scopeId","data-v-1409e9b5"]]);export{le as default};
